<link rel="stylesheet" href="css/styles.css"/>
<!DOCTYPE HTML>
<head>
    <title>Editors Pick </title>
</head>
<body>
    <header>
        <a href="index.html">
            <img src="Images/NEWGhostyGames.png" class="logo" alt="Logo" style="width:180px;height:150px;">
        </a>
        <h1>Editors Pick</h1>
        <nav>
           <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
            <a href="donate.html">Donate</a>
        </nav>
        <div class="search-container">
            <input type="text" placeholder="Search games..." id="search-input">
            <button id="search-button">Search</button>
        </div>
         <div class="login-container" id="login-container">
            <button id="login-button">
                <a href="login.html" id="login">Log In</a>
            </button>
        </div>

        <div id="profile-container" style="display:none;" class="profile-dropdown">
      <button class="profile-btn" id="profile-btn">Profile ▼</button>
      <div class="profile-menu" id="profile-menu">
        <p><strong>Email:</strong> <span id="profile-email"></span></p>
        <input type="text" id="username-prefix" placeholder="Enter custom username">
        <button class="save-btn" id="save-username">Save Username</button>
        <button class="logout-btn" id="logout-button">Log Out</button>
      </div>

    </header>
    <main>
        <h2>Editors Pick</h2>
        <p>Check out our <strong>Editors Picks!</strong></p>

<div class="games-grid">
<a class="game-card" href="Teritorial.html">
<img src="Images/teritorial.png"  alt="Teritorial">
<h3>Teritorial</h3>
<p>This Game is all about strategy and territory control!</p>
</a>
<a class="game-card" href="geometrydash.html">
<img src="Images/geometrydash.png" alt="geometrydash">
<h3>Geometrydash</h3>
<p>Blast through levels with extreme precision and focus without being eliminated!</p>
</a>
<a class="game-card" href="spaceinvaders.html">
<img src="Images/spaceinvaders.png" alt="spaceinvaders">
<h3>Invading Space</h3>
<p>Classic arcade game where you defend against waves of aliens.</p>
</a>
<a class="game-card" href="Snake.html">
<img src="Images/snake.png" alt="Snake">
<h3>Snake</h3>
<p>Eat food, grow longer, and avoid hitting yourself in this classic game.</p>
</a>
<a class="game-card" href="2048.html">
<img src="Images/2048.png" alt="2048">
<h3>2048</h3>
<p>Combine tiles to reach 2048 in this popular puzzle game.</p>
</a>
<a class="game-card" href="minesweeper.html">
<img src="Images/minesweeper.png" alt="Minesweeper">
<h3>Minesweeper</h3>
<p>Uncover all the safe squares without detonating any mines!</p>
</a>
<a class="game-card" href="breakout.html">
<img src="Images/breakout.png" alt="Breakout">
<h3>Breakout</h3>
<p>Bounce the ball to break all the bricks in this arcade classic.</p>
</a>
<a class="game-card" href="pong.html">
<img src="Images/pong.png" alt="Pong">
<h3>Pong</h3>
<p>Challenge a friend or the computer in this table tennis game.</p>
</a>
<a class="game-card" href="dino.html">
<img src="Images/dino.png" alt="Dino Run">
<h3>Dino Run</h3>
<p>Jump over obstacles and run as far as you can!</p>
</a>
</div>
</main>
    </main>
    <footer>
            <script type="module">
                import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
                import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
                import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

                const firebaseConfig = {
                    apiKey: "AIzaSyDSpebs9nP97-IkXXGALGR2vCqcTTOzlyo",
                    authDomain: "ghoatygames.firebaseapp.com",
                    projectId: "ghoatygames",
                    storageBucket: "ghoatygames.firebasestorage.app",
                    messagingSenderId: "606779515816",
                    appId: "1:606779515816:web:774ccc3cd8d7f895f7339d",
                    measurementId: "G-CCE1LRLR46"
                };

                const app = initializeApp(firebaseConfig);
                const auth = getAuth(app);
                const db = getFirestore(app);

                let username = null;

                async function loadUsername(user) {
                    try {
                        const userRef = doc(db, "leaderboard", user.uid);
                        const userSnap = await getDoc(userRef);
                        if (userSnap.exists()) {
                            username = userSnap.data().username || null;
                        } else {
                            username = null;
                        }
                    } catch (e) {
                        username = null;
                    }
                }

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        await loadUsername(user);
                        document.getElementById("login-container").style.display = "none";
                        document.getElementById("profile-container").style.display = "inline-block";
                        document.getElementById("profile-btn").textContent = (username || user.email) + " ▼";
                        document.getElementById("profile-email").textContent = user.email;
                    } else {
                        document.getElementById("login-container").style.display = "inline-block";
                        document.getElementById("profile-container").style.display = "none";
                    }
                });

                document.getElementById("profile-btn").addEventListener("click", () => {
                    document.getElementById("profile-container").classList.toggle("active");
                });

                document.getElementById("save-username").addEventListener("click", async () => {
                    const user = auth.currentUser;
                    if (user) {
                        username = document.getElementById("username-prefix").value.trim();
                        if (username) {
                            try {
                                await setDoc(doc(db, "leaderboard", user.uid), { username: username }, { merge: true });
                                document.getElementById("profile-btn").textContent = username + " ▼";
                                alert("Username saved");
                            } catch (err) {
                                alert("Failed to save username");
                            }
                        }
                    }
                });
                document.getElementById("logout-button").addEventListener("click", async () => {
                    await signOut(auth);
                    location.reload();
                });
            </script>
<script type="module" src="session.js"></script>

    </footer>
